---
id: 104197
title: '2024年 clash 规则文件及使用教程'
date: '2024-12-20T21:23:29+08:00'
author: jichanghui
layout: post
guid: 'https://affvps.com/?p=104197'
permalink: /104197-2/
views:
    - '325'
wb_sst_seo:
    - 'a:3:{i:0;s:0:"";i:1;s:0:"";i:2;s:0:"";}'
categories:
    - 机场推荐
---

## 规则文件地址及使用方式

### 在线地址（URL）

> 如果无法访问域名 `raw.githubusercontent.com`，可以使用第二个地址（`cdn.jsdelivr.net`），但是内容更新会有 12 小时的延迟。以下地址填写在 Clash 配置文件里的 `rule-providers` 里的 `url` 配置项中。

- **直连域名列表 direct.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/direct.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt>
- **代理域名列表 proxy.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt>
- **广告域名列表 reject.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt>
- **私有网络专用域名列表 private.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/private.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt>
- **Apple 在中国大陆可直连的域名列表 apple.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/apple.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt>
- **iCloud 域名列表 icloud.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/icloud.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt>
- **\[慎用\]Google 在中国大陆可直连的域名列表 google.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/google.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt>
- **GFWList 域名列表 gfw.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/gfw.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt>
- **非中国大陆使用的顶级域名列表 tld-not-cn.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/tld-not-cn.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt>
- **Telegram 使用的 IP 地址列表 telegramcidr.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/telegramcidr.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt>
- **局域网 IP 及保留 IP 地址列表 lancidr.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/lancidr.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt>
- **中国大陆 IP 地址列表 cncidr.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/cncidr.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt>
- **需要直连的常见软件列表 applications.txt**： 
    - <https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/applications.txt>
    - <https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt>
 
### 使用方式

要想使用本项目的规则集，只需要在 Clash 配置文件中添加如下 `rule-providers` 和 `rules`。

#### Rule Providers 配置方式

<div class="highlight highlight-source-yaml notranslate position-relative overflow-auto" dir="auto"> ```
<span class="pl-ent">rule-providers</span>:
  <span class="pl-ent">reject</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">domain</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/reject.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">icloud</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">domain</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/icloud.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">apple</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">domain</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/apple.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">google</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">domain</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/google.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">proxy</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">domain</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/proxy.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">direct</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">domain</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/direct.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">private</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">domain</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/private.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">gfw</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">domain</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/gfw.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">tld-not-cn</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">domain</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/tld-not-cn.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">telegramcidr</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">ipcidr</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/telegramcidr.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">cncidr</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">ipcidr</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/cncidr.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">lancidr</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">ipcidr</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/lancidr.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>

  <span class="pl-ent">applications</span>:
    <span class="pl-ent">type</span>: <span class="pl-s">http</span>
    <span class="pl-ent">behavior</span>: <span class="pl-s">classical</span>
    <span class="pl-ent">url</span>: <span class="pl-s"><span class="pl-pds">"</span>https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt<span class="pl-pds">"</span></span>
    <span class="pl-ent">path</span>: <span class="pl-s">./ruleset/applications.yaml</span>
    <span class="pl-ent">interval</span>: <span class="pl-c1">86400</span>
```

<div class="zeroclipboard-container"></div> </div>
#### 白名单模式 Rules 配置方式（推荐）

- 白名单模式，意为「**没有命中规则的网络流量，统统使用代理**」，适用于服务器线路网络质量稳定、快速，不缺服务器流量的用户。
- 以下配置中，除了 `DIRECT` 和 `REJECT` 是默认存在于 Clash 中的 policy（路由策略/流量处理策略），其余均为自定义 policy，对应配置文件中 `proxies` 或 `proxy-groups` 中的 `name`。如你直接使用下面的 `rules` 规则，则需要在 `proxies` 或 `proxy-groups` 中手动配置一个 `name` 为 `PROXY` 的 policy。
- 如你希望 Apple、iCloud 和 Google 列表中的域名使用代理，则把 policy 由 `DIRECT` 改为 `PROXY`，以此类推，举一反三。
- 如你不希望进行 DNS 解析，可在 `GEOIP` 规则的最后加上 `,no-resolve`，如 `GEOIP,CN,DIRECT,no-resolve`。
 
<div class="highlight highlight-source-yaml notranslate position-relative overflow-auto" dir="auto"> ```
<span class="pl-ent">rules</span>:
  - <span class="pl-s">RULE-SET,applications,DIRECT</span>
  - <span class="pl-s">DOMAIN,clash.razord.top,DIRECT</span>
  - <span class="pl-s">DOMAIN,yacd.haishan.me,DIRECT</span>
  - <span class="pl-s">RULE-SET,private,DIRECT</span>
  - <span class="pl-s">RULE-SET,reject,REJECT</span>
  - <span class="pl-s">RULE-SET,icloud,DIRECT</span>
  - <span class="pl-s">RULE-SET,apple,DIRECT</span>
  - <span class="pl-s">RULE-SET,google,DIRECT</span>
  - <span class="pl-s">RULE-SET,proxy,PROXY</span>
  - <span class="pl-s">RULE-SET,direct,DIRECT</span>
  - <span class="pl-s">RULE-SET,lancidr,DIRECT</span>
  - <span class="pl-s">RULE-SET,cncidr,DIRECT</span>
  - <span class="pl-s">RULE-SET,telegramcidr,PROXY</span>
  - <span class="pl-s">GEOIP,LAN,DIRECT</span>
  - <span class="pl-s">GEOIP,CN,DIRECT</span>
  - <span class="pl-s">MATCH,PROXY</span>
```

 </div>#### 黑名单模式 Rules 配置方式

- 黑名单模式，意为「**只有命中规则的网络流量，才使用代理**」，适用于服务器线路网络质量不稳定或不够快，或服务器流量紧缺的用户。通常也是软路由用户、家庭网关用户的常用模式。
- 以下配置中，除了 `DIRECT` 和 `REJECT` 是默认存在于 Clash 中的 policy（路由策略/流量处理策略），其余均为自定义 policy，对应配置文件中 `proxies` 或 `proxy-groups` 中的 `name`。如你直接使用下面的 `rules` 规则，则需要在 `proxies` 或 `proxy-groups` 中手动配置一个 `name` 为 `PROXY` 的 policy。
 
<div class="highlight highlight-source-yaml notranslate position-relative overflow-auto" dir="auto"> ```
<span class="pl-ent">rules</span>:
  - <span class="pl-s">RULE-SET,applications,DIRECT</span>
  - <span class="pl-s">DOMAIN,clash.razord.top,DIRECT</span>
  - <span class="pl-s">DOMAIN,yacd.haishan.me,DIRECT</span>
  - <span class="pl-s">RULE-SET,private,DIRECT</span>
  - <span class="pl-s">RULE-SET,reject,REJECT</span>
  - <span class="pl-s">RULE-SET,tld-not-cn,PROXY</span>
  - <span class="pl-s">RULE-SET,gfw,PROXY</span>
  - <span class="pl-s">RULE-SET,telegramcidr,PROXY</span>
  - <span class="pl-s">MATCH,DIRECT</span>
```

</div>